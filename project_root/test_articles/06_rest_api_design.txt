Проектирование RESTful API: принципы, версионирование и документация

REST (Representational State Transfer) архитектурный стиль для веб-API, использующий HTTP методы и статус-коды для манипуляции ресурсами. Хорошо спроектированный API интуитивен, консистентен и легко документируется, плохой — источник фрустрации для разработчиков.

Ресурсы идентифицируются URL-путями, представляющими существительные, не глаголы. GET /users/123 получает пользователя, POST /users создаёт, PUT /users/123 обновляет, DELETE /users/123 удаляет. Вложенные ресурсы: GET /users/123/posts для постов пользователя. Избегайте глаголов типа /getUser или /createPost.

HTTP статус-коды передают результат операции. 200 OK для успешного GET, 201 Created для POST, 204 No Content для DELETE. Ошибки: 400 Bad Request для невалидных данных, 401 Unauthorized без токена, 403 Forbidden с токеном но без прав, 404 Not Found для несуществующих ресурсов, 500 Internal Server Error для сбоев сервера.

Пагинация обязательна для коллекций. Возврат всех миллионов пользователей перегружает сеть и память. Параметры limit и offset: GET /users?limit=20&offset=40. Альтернатива — cursor-based pagination, более эффективная для больших датасетов. Заголовки Link (RFC 5988) указывают URL следующей/предыдущей страниц.

Версионирование предотвращает breaking changes. Варианты: в URL (/v1/users), в заголовке (Accept: application/vnd.api.v1+json), в параметре (?version=1). URL-версионирование наиболее явное и кэшируемое. Семантическое версионирование (major.minor.patch) коммуницирует обратную совместимость.

OpenAPI (Swagger) спецификация описывает API машиночитаемым YAML/JSON. Инструменты генерируют интерактивную документацию, клиентские SDK, валидацию запросов. Postman коллекции позволяют тестировать API вручную. Автогенерация спецификации из кода (FastAPI, NestJS) гарантирует актуальность документации.
